<form class="form" id="itemCollectionForm" name="itemCollectionForm">
	<div class="row">
		<div class="col-xs-12">
			<h1 class="pull-left">
				<i class="fa fa-lg fa-list"></i> <span> Profit Report</span>
			</h1>
			<div class="btn-group pull-right" style="margin-top: 20px;" role="group" aria-label="...">
				<button ng-click="search()" class="btn btn-primary pull-right">
		        	  <i class="fa fa-search"></i> Search
		        </button>
				<back-button></back-button>
			</div>
			
			<hr />
		</div>
	</div>
	<div class="row">
		<div class="col-md-12">
			<h3>
				<span>Filters</span>
			</h3>
		</div>
	</div>
   <div class="row">
      <div class="col-md-4 col-lg-4 col-xs-12">
        <div class="input-group">
          <div class="input-group-addon">Desde:</div>
          <sc-datepicker ng-model="params.start" id="startDate" ng-required="false" left="true"></sc-datepicker>
        </div>
      </div>
      <div class="col-md-4 col-lg-4 col-xs-12">
        <div class="input-group">
          <div class="input-group-addon">Hasta:</div>
          <sc-datepicker ng-model="params.end" id="startDate" ng-required="false" left="true"></sc-datepicker>
        </div>
      </div>
      <div class="col-md-4 col-lg-4 col-xs-12">
        <div class="input-group">
          <div class="input-group-addon">Invoice:</div>
          <input type="text" class="form-control" name="" ng-model="params.invoiceNumber">
       
        </div>
      </div>
      <!-- <div class="col-md-3 col-lg-3 col-xs-12">
        <div class="input-group">
          <div class="input-group-addon">Document No:</div>
          <input type="text" class="form-control" name="" ng-model="params.document">
       
        </div>
      </div> -->
    </div>
    <div class="row" style="padding-top:10px; padding-bottom: 10px">
      <div class="col-md-4 col-lg-4 col-xs-12">
        <div class="input-group">
           <div class="input-group-addon">Client:</div>
          <entitypicker ng-model="params.client" ws-class="wsClass" ws-fields="wsFields" ws-filter="wsFilter" disable="userData.role._id != 1"></entitypicker>
        </div>
      </div>
      <div class="col-md-4 col-lg-4 col-xs-12">
        <div class="input-group">
           <div class="input-group-addon">Company:</div>
           <select class="form-control" ng-model="params.company" id="role" ng-options="company as company.entity.name for company in companies track by company._id" ng-change="getBranches(params.company)"></select>
        </div>
      </div>
      <div class="col-md-4 col-lg-4 col-xs-12">
        <div class="input-group">
          <div class="input-group-addon">Branch:</div>
          <select class="form-control" ng-model="params.branch" id="branch" ng-options="branch as branch.name for branch in branches track by branch._id" ng-disabled="userData.role._id != 1"></select>
        </div>
      </div>
    </div>
	<div class="row">
		<div class="col-xs-10">
			<div class="col-xs-12">
				<table class="table table-striped table-hover">
					<thead>
						<tr>
							<th width="10%">
								Invoice
							</th>
							<th width="20%">
								Document No. (SOR, WOR)
							</th>
							<th width="20%">
								Client
							</th>
							<th width="10%">
								Company
							</th>
							<th width="10%">
								Branch
							</th>
							<th width="10%">
								Total
							</th>
							<th width="10%">
								Expenses
							</th>
							<th width="10%">
								Profit
							</th>
						</tr>
					</thead>
					<tbody>
						<tr ng-repeat="invoice in invoices track by $index">
							<td>
								{{invoice.invoiceNumber}}
							</td>
							<td>
								{{invoice.document}}
							</td>
							<td>
								{{invoice.client}}
							</td>
							<td>
								{{invoice.company}}
							</td>
							<td>
								{{invoice.branch}}
							</td>
							<td>
								{{invoice.totalIncome|currency}}
							</td>
							<td>
								{{invoice.totalExpenses|currency}}
							</td>
							<td>
								{{(invoice.totalIncome - invoice.totalExpenses)|currency}}
							</td>
						</tr>
						<tr>
							<td colspan="5" class="text-right">
								<b>Totals</b>
							</td>
							<td>
								<b>{{totalIncome|currency}}</b>
							</td>
							<td>
								<b>{{totalExpenses|currency}}</b>
							</td>
							<td>
								<b>{{totalIncome - totalExpenses |currency}}</b>
							</td>
						</tr>
					</tbody>
				</table>
			</div>
		</div>
	</div>
</form>